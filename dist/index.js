{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import Promise from \"bluebird\";\r\nimport lodashDeep from \"lodash-deep\";\r\nimport yaml from \"js-yaml\";\r\nimport fs from \"fs\";\r\nimport https from \"https\";\r\nimport extend from \"extend-shallow\";\r\nimport _ from \"./lodash-extended\";\r\nimport path from \"path\";\r\nimport S from \"string\";\r\nimport mkdirp from \"mkdirp\";\r\nimport octonode from \"octonode\";\r\n\r\nexport default class Sammler {\r\n\tconstructor ( config ) {\r\n\t\tthis.environment = process.env.NODE_ENV || \"development\";\r\n\t\tthis.config = this._getConfig( config );\r\n\t\tthis._init( this.config );\r\n\t\tthis._client;\r\n\r\n\r\n\t\tvar authToken = process.env.NODE_SAMMLER_TOKEN;\r\n\t\tif ( authToken ) {\r\n\t\t\tthis._client = octonode.client( authToken );\r\n\t\t} else {\r\n\t\t\tthis._client = octonode.client();\r\n\t\t}\r\n\t}\r\n\r\n\tget client () {\r\n\t\treturn this._client;\r\n\t}\r\n\r\n\t/**\r\n\t * Initialize the instance of Sammler.\r\n\t * @param config\r\n\t * @private\r\n\t */\r\n\t_init ( config ) {\r\n\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Get the content of a given source-definition.\r\n\t * @param {Object} sourceDef\r\n\t * @param {String} sourceDef.user - The user (e.g. `stefanwalther`). Mandatory.\r\n\t * @param {String} sourceDef.repo - Name of the repository (e.g. `sammler-test-repo1`). Mandatory.\r\n\t * @param {String?} sourceDef.ref - The branch, defaults to `master`.\r\n\t * @param {String?} sourceDef.path - Path to fetch contents from (e.g. `dir-1` n sammler-test-repo1). Defaults to \"\".\r\n\t * @param {Boolean?} sourceDef.recursive - Whether to fetch contents recursively or not, defaults to false.\r\n\t *\r\n\t * @returns {*}\r\n\t */\r\n\tgetContent ( sourceDef ) {\r\n\r\n\t\treturn this._getRepoContent( sourceDef.user, sourceDef.repo, sourceDef.ref, sourceDef.path )\r\n\t\t\t.map( ( content ) => {\r\n\t\t\t\tlet def = {\r\n\t\t\t\t\tuser: sourceDef.user,\r\n\t\t\t\t\trepo: sourceDef.repo,\r\n\t\t\t\t\tref: sourceDef.ref,\r\n\t\t\t\t\tpath: content.path,\r\n\t\t\t\t\trecursive: sourceDef.recursive\r\n\t\t\t\t};\r\n\t\t\t\treturn (content.type === \"dir\" && sourceDef.recursive === true) ? this.getContent( def ) : content;\r\n\t\t\t} )\r\n\t\t\t.reduce( ( a, b ) => {\r\n\t\t\t\treturn a.concat( b )\r\n\t\t\t}, [] )\r\n\t\t\t.then( ( data ) => {\r\n\t\t\t\treturn sourceDef.filter ? this._filter( data, sourceDef.filter ) : Promise.resolve( data );\r\n\t\t\t} );\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the collection of source-definitions.\r\n\t * @param sourceDefArr\r\n\t * @returns {Promise}\r\n\t */\r\n\tgetContents ( sourceDefArr ) {\r\n\t\tlet getContentPromises = [];\r\n\t\tsourceDefArr.forEach( ( def ) => {\r\n\t\t\tgetContentPromises.push( this.getContent( def ) );\r\n\t\t} );\r\n\t\treturn Promise.all( getContentPromises );\r\n\t}\r\n\r\n\tsaveContent ( gitHubContent, requestedDir, target ) {\r\n\r\n\t\tlet that = this;\r\n\t\treturn new Promise( ( resolved, rejected ) => {\r\n\t\t\tlet localTarget = path.resolve( that._getLocalTarget( target, gitHubContent.path, requestedDir ) );\r\n\r\n\t\t\tmkdirp.sync( path.dirname( localTarget ) );\r\n\t\t\tlet file = fs.createWriteStream( localTarget );\r\n\t\t\thttps.get( gitHubContent.download_url, ( response ) => {\r\n\t\t\t\tresponse.on( \"data\", ( data ) => {\r\n\t\t\t\t\tfile.write( data );\r\n\t\t\t\t} ).on( \"end\", () => {\r\n\t\t\t\t\tfile.end();\r\n\t\t\t\t\tresolved( file.path );\r\n\t\t\t\t} )\r\n\t\t\t} ).on( \"error\", ( err ) => {\r\n\t\t\t\trejected( err );\r\n\t\t\t} );\r\n\t\t} );\r\n\t}\r\n\r\n\t/**\r\n\t * Save a GitHub content to disk.\r\n\t * @param gitHubContent\r\n\t * @param target\r\n\t * @private\r\n\t */\r\n\t_saveToDisk ( gitHubContent, target ) {\r\n\r\n\t}\r\n\r\n\tsaveContents ( sourceDefArray ) {\r\n\r\n\t}\r\n\r\n\t// ****************************************************************************************\r\n\t// Private methods\r\n\t// ****************************************************************************************\r\n\t/**\r\n\t * Arrayify an item.\r\n\t * @param item\r\n\t * @returns {*}\r\n\t * @private\r\n\t */\r\n\t_arrayIfy( item ) {\r\n\t\tif (_.isArray( item )) {\r\n\t\t\treturn item;\r\n\t\t} else {\r\n\t\t\tlet x = [];\r\n\t\t\tx.push( item );\r\n\t\t\treturn x;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Filter either only directories, files or both from a given result-set.\r\n\t * @param data\r\n\t * @param {Array} filter The given filter, containing the following possible values: [\"dir\"], [\"file\"] or [\"dir\", \"file\"]. Defaults to the latter one.\r\n\t * @private\r\n\t * @returns {Promise.<*>}\r\n\t */\r\n\t_filter ( data, filter ) {\r\n\r\n\t\tfilter = filter || [\"dir\", \"file\"];\r\n\t\tvar filteredData;\r\n\t\t// only array of returned contents can be filtered, not a single item.\r\n\t\tif ( _.isArray( data ) ) {\r\n\t\t\tfilteredData = _.filterByValues( data, \"type\", filter );\r\n\t\t}\r\n\t\treturn Promise.resolve( filteredData || data );\r\n\t}\r\n\r\n\t/**\r\n\t * Get the current config\r\n\t * @param instanceConfig\r\n\t * @private\r\n\t */\r\n\t_getConfig ( instanceConfig ) {\r\n\t\tlet defaultConfig = {\r\n\t\t\tversion: \"3.0.0\",\r\n\t\t\tdebug: false, //(this.environment === 'development') ? true : false,\r\n\t\t\tprotocol: \"https\",\r\n\t\t\ttimeout: 5000\r\n\t\t};\r\n\t\treturn extend( defaultConfig, instanceConfig );\r\n\t}\r\n\r\n\t/**\r\n\t * Promisified call to get the content using octonode.\r\n\t * (Since octonode is just used here and in _init, octonode could be replaced easily with another lib)\r\n\t * @param rep\r\n\t * @param ref\r\n\t * @param path\r\n\t */\r\n\t_getRepoContent ( user, repo, ref, path ) {\r\n\t\treturn new Promise( ( resolved, rejected ) => {\r\n\t\t\tthis._client.repo( user + \"/\" + repo, ref ).contents( path, ( err, data ) => {\r\n\t\t\t\tif ( err ) {\r\n\t\t\t\t\trejected( err );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresolved( this._arrayIfy( data ));\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t} );\r\n\t}\r\n\r\n\t/**\r\n\t * Return a local target for a given gitHub file.\r\n\t * @param {String} localTarget - Local base target\r\n\t * @param {Object} gitHubFile - The GitHub content definition of a single file.\r\n\t * @param {String} gitHubPath\r\n\t * @returns {string}\r\n\t * @private\r\n\t */\r\n\t_getLocalTarget ( localTarget, gitHubFile, gitHubPath ) {\r\n\r\n\t\tlet baseLocalPath = localTarget;\r\n\t\tlet file = S( gitHubFile ).chompLeft( gitHubPath ).chompLeft( '/' ).s;\r\n\r\n\t\treturn path.normalize( path.join( baseLocalPath, file ) );\r\n\t}\r\n\r\n\r\n}\r\n"],"sourceRoot":"D:\\Projects\\private-projects\\sammler\\lib"}
"use strict";

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _bluebird = require("bluebird");

var _bluebird2 = _interopRequireDefault(_bluebird);

var _lodashDeep = require("lodash-deep");

var _lodashDeep2 = _interopRequireDefault(_lodashDeep);

var _jsYaml = require("js-yaml");

var _jsYaml2 = _interopRequireDefault(_jsYaml);

var _fs = require("fs");

var _fs2 = _interopRequireDefault(_fs);

var _https = require("https");

var _https2 = _interopRequireDefault(_https);

var _extendShallow = require("extend-shallow");

var _extendShallow2 = _interopRequireDefault(_extendShallow);

var _lodashExtended = require("./lodash-extended");

var _lodashExtended2 = _interopRequireDefault(_lodashExtended);

var _path = require("path");

var _path2 = _interopRequireDefault(_path);

var _string = require("string");

var _string2 = _interopRequireDefault(_string);

var _mkdirp = require("mkdirp");

var _mkdirp2 = _interopRequireDefault(_mkdirp);

var _octonode = require("octonode");

var _octonode2 = _interopRequireDefault(_octonode);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Sammler = (function () {
	function Sammler(config) {
		_classCallCheck(this, Sammler);

		this.environment = process.env.NODE_ENV || "development";
		this.config = this._getConfig(config);
		this._init(this.config);
		this._client;

		var authToken = process.env.NODE_SAMMLER_TOKEN;
		if (authToken) {
			this._client = _octonode2.default.client(authToken);
		} else {
			this._client = _octonode2.default.client();
		}
	}

	_createClass(Sammler, [{
		key: "_init",

		/**
   * Initialize the instance of Sammler.
   * @param config
   * @private
   */
		value: function _init(config) {}

		/**
   * Get the content of a given source-definition.
   * @param {Object} sourceDef
   * @param {String} sourceDef.user - The user (e.g. `stefanwalther`). Mandatory.
   * @param {String} sourceDef.repo - Name of the repository (e.g. `sammler-test-repo1`). Mandatory.
   * @param {String?} sourceDef.ref - The branch, defaults to `master`.
   * @param {String?} sourceDef.path - Path to fetch contents from (e.g. `dir-1` n sammler-test-repo1). Defaults to "".
   * @param {Boolean?} sourceDef.recursive - Whether to fetch contents recursively or not, defaults to false.
   *
   * @returns {*}
   */

	}, {
		key: "getContent",
		value: function getContent(sourceDef) {
			var _this = this;

			return this._getRepoContent(sourceDef.user, sourceDef.repo, sourceDef.ref, sourceDef.path).map(function (content) {
				var def = {
					user: sourceDef.user,
					repo: sourceDef.repo,
					ref: sourceDef.ref,
					path: content.path,
					recursive: sourceDef.recursive
				};
				return content.type === "dir" && sourceDef.recursive === true ? _this.getContent(def) : content;
			}).reduce(function (a, b) {
				return a.concat(b);
			}, []).then(function (data) {
				return sourceDef.filter ? _this._filter(data, sourceDef.filter) : _bluebird2.default.resolve(data);
			});
		}

		/**
   * Returns the collection of source-definitions.
   * @param sourceDefArr
   * @returns {Promise}
   */

	}, {
		key: "getContents",
		value: function getContents(sourceDefArr) {
			var _this2 = this;

			var getContentPromises = [];
			sourceDefArr.forEach(function (def) {
				getContentPromises.push(_this2.getContent(def));
			});
			return _bluebird2.default.all(getContentPromises);
		}
	}, {
		key: "saveContent",
		value: function saveContent(gitHubContent, requestedDir, target) {

			var that = this;
			return new _bluebird2.default(function (resolved, rejected) {
				var localTarget = _path2.default.resolve(that._getLocalTarget(target, gitHubContent.path, requestedDir));

				_mkdirp2.default.sync(_path2.default.dirname(localTarget));
				var file = _fs2.default.createWriteStream(localTarget);
				_https2.default.get(gitHubContent.download_url, function (response) {
					response.on("data", function (data) {
						file.write(data);
					}).on("end", function () {
						file.end();
						resolved(file.path);
					});
				}).on("error", function (err) {
					rejected(err);
				});
			});
		}

		/**
   * Save a GitHub content to disk.
   * @param gitHubContent
   * @param target
   * @private
   */

	}, {
		key: "_saveToDisk",
		value: function _saveToDisk(gitHubContent, target) {}
	}, {
		key: "saveContents",
		value: function saveContents(sourceDefArray) {}

		// ****************************************************************************************
		// Private methods
		// ****************************************************************************************
		/**
   * Arrayify an item.
   * @param item
   * @returns {*}
   * @private
   */

	}, {
		key: "_arrayIfy",
		value: function _arrayIfy(item) {
			if (_lodashExtended2.default.isArray(item)) {
				return item;
			} else {
				var x = [];
				x.push(item);
				return x;
			}
		}

		/**
   * Filter either only directories, files or both from a given result-set.
   * @param data
   * @param {Array} filter The given filter, containing the following possible values: ["dir"], ["file"] or ["dir", "file"]. Defaults to the latter one.
   * @private
   * @returns {Promise.<*>}
   */

	}, {
		key: "_filter",
		value: function _filter(data, filter) {

			filter = filter || ["dir", "file"];
			var filteredData;
			// only array of returned contents can be filtered, not a single item.
			if (_lodashExtended2.default.isArray(data)) {
				filteredData = _lodashExtended2.default.filterByValues(data, "type", filter);
			}
			return _bluebird2.default.resolve(filteredData || data);
		}

		/**
   * Get the current config
   * @param instanceConfig
   * @private
   */

	}, {
		key: "_getConfig",
		value: function _getConfig(instanceConfig) {
			var defaultConfig = {
				version: "3.0.0",
				debug: false, //(this.environment === 'development') ? true : false,
				protocol: "https",
				timeout: 5000
			};
			return (0, _extendShallow2.default)(defaultConfig, instanceConfig);
		}

		/**
   * Promisified call to get the content using octonode.
   * (Since octonode is just used here and in _init, octonode could be replaced easily with another lib)
   * @param rep
   * @param ref
   * @param path
   */

	}, {
		key: "_getRepoContent",
		value: function _getRepoContent(user, repo, ref, path) {
			var _this3 = this;

			return new _bluebird2.default(function (resolved, rejected) {
				_this3._client.repo(user + "/" + repo, ref).contents(path, function (err, data) {
					if (err) {
						rejected(err);
					} else {
						resolved(_this3._arrayIfy(data));
					}
				});
			});
		}

		/**
   * Return a local target for a given gitHub file.
   * @param {String} localTarget - Local base target
   * @param {Object} gitHubFile - The GitHub content definition of a single file.
   * @param {String} gitHubPath
   * @returns {string}
   * @private
   */

	}, {
		key: "_getLocalTarget",
		value: function _getLocalTarget(localTarget, gitHubFile, gitHubPath) {

			var baseLocalPath = localTarget;
			var file = (0, _string2.default)(gitHubFile).chompLeft(gitHubPath).chompLeft('/').s;

			return _path2.default.normalize(_path2.default.join(baseLocalPath, file));
		}
	}, {
		key: "client",
		get: function get() {
			return this._client;
		}
	}]);

	return Sammler;
})();

exports.default = Sammler;
//# sourceMappingURL=index.js.map

{"version":3,"sources":["lodash-extended.js"],"names":[],"mappings":";;;;;;;;AAEA,iBAAE,KAAK,CAAE,OAAO,CAAE,aAAa,CAAE,CAAE,CAAC;AACpC,iBAAE,KAAK,CAAE;AACR,iBAAgB,EAAE,wBAAW,UAAU,EAAE,GAAG,EAAE,MAAM,EAAG;AACtD,SAAO,iBAAE,MAAM,CAAE,UAAU,EAAE,UAAW,CAAC,EAAG;AAC3C,UAAO,iBAAE,QAAQ,CAAE,MAAM,EAAE,UAAU,CAAE,CAAC,EAAE,GAAG,CAAE,CAAE,CAAC;GAClD,CAAE,CAAC;EACJ;CACD,CAAE,CAAC;;AAEJ,SAAS,UAAU,CAAG,GAAG,EAAE,GAAG,EAAG;AAChC,QAAO,AAAC,OAAO,GAAG,IAAI,UAAU,GAAI,GAAG,CAAE,GAAG,CAAE,GAAG,iBAAE,OAAO,CAAE,GAAG,EAAE,GAAG,CAAE,CAAC;CACvE;;AAED,MAAM,CAAC,OAAO,mBAAI,CAAC","file":"lodash-extended.js","sourcesContent":["import _ from \"lodash\";\r\n\r\n_.mixin( require( \"lodash-deep\" ) );\r\n_.mixin( {\r\n\t'filterByValues': function ( collection, key, values ) {\r\n\t\treturn _.filter( collection, function ( o ) {\r\n\t\t\treturn _.contains( values, resolveKey( o, key ) );\r\n\t\t} );\r\n\t}\r\n} );\r\n\r\nfunction resolveKey ( obj, key ) {\r\n\treturn (typeof key == 'function') ? key( obj ) : _.deepGet( obj, key );\r\n}\r\n\r\nmodule.exports = _;"],"sourceRoot":"D:\\Projects\\private-projects\\sammler\\lib"}
"use strict";

var _lodash = require("lodash");

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_lodash2.default.mixin(require("lodash-deep"));
_lodash2.default.mixin({
	'filterByValues': function filterByValues(collection, key, values) {
		return _lodash2.default.filter(collection, function (o) {
			return _lodash2.default.contains(values, resolveKey(o, key));
		});
	}
});

function resolveKey(obj, key) {
	return typeof key == 'function' ? key(obj) : _lodash2.default.deepGet(obj, key);
}

module.exports = _lodash2.default;
//# sourceMappingURL=lodash-extended.js.map
